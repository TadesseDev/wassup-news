
<div id="root" data-controller="get-news" data-get-news-channel-id-value="<%= session.id %>">
<%= render 'navbar' %>
<div class="main-flow" data-controller="update"  data-update-channel-id-value="<%= session.id %>">
    <header >
    <h1 data-search-target="results">
        <%=link_to root_path do%>
        <span class="green">WAASUP</span>-TODAY
    <%end%>
    </h1>
    <ul>
    <% @categories.each do |category| %>
    <li>
        <a href="#<%=category.name%>"><%= category.name %></a>
    </li>
    <% end %>
    <li>
        <%=form_with url: search_path, id: "search-form"  do |form|%>
        <%= form.text_field "query", class: "search-text", placeholder: "Search here" %>
        <%= form.hidden_field "country", value: @country_name %>
           <%= form.button :submit,  class: "search" do %>
                <i class="fa-solid fa-2x fa-magnifying-glass green"></i>
        <%end%>
        <%end%>
    </li>




</ul>
    </header>
<section id="countries">
    <h2>find your country down</h2>
    <div class="container">
<% @countries.each do |country|%>
<%= link_to country.name, root_path(country: country.name), class: "country"%>

<%end%>
    </div>
</section>
<section id="general" class="article-container">
        <h2 class="category">General - Articles</h2>
        <div class="articles">

        </div>
    </section>
<% @categories.each do |category|%>
    <section id=<%=category.name%> class="article-container">
        <h2 class="category"><%=category.name%> - Articles</h2>
        <div class="articles">
            <% if @news[category.name] %>
        <%= render  partial: 'news', collection: @news[category.name] %>
            <% end %>

        </div>
    </section>
    <% end %>
</div>
</div>
